<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grocery Website</title>

    <!-- swiper cdn link -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.0.0/swiper-bundle.min.css"
    />

    <!-- font awesome cdn link  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />

    <!-- custom css file link  -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- header section starts -->

    <header class="header">
      <a href="#" class="logo"><i class="fas fa-shopping-basket"></i> groco </a>
      <nav class="navbar">
        <a href="#home">home</a>
        <a href="#products">products</a>
        <a href="#categories">categories</a>

        <
      </nav>

      <div class="icons">
        <div class="fas fa-bars" id="menu-btn"></div>
        <div class="fas fa-search" id="search-btn"></div>
        <div class="fas fa-shopping-cart" id="cart-btn"></div>
        <div class="fas fa-user" id="login-btn"></div>
      </div>

      <form action="" class="search-form">
        <input type="search" id="search-box" placeholder="search here..." />
        <label for="search-box" class="fas fa-search"></label>
      </form>

      <div class="shopping-cart">
        <div class="tab-container">
          <!-- Tab Navigation -->
          <div class="tabs">
            <button
              class="tab-link active"
              onclick="openTab(event, 'add-product')"
            >
              Thêm sản phẩm
            </button>
            <button class="tab-link" onclick="openTab(event, 'add-category')">
              Thêm ảnh nhận diện
            </button>
          </div>

          <!-- Tab Content -->
          <div id="add-product" class="tab-content active">
            <form
              action="http://localhost:3200/add-product"
              method="POST"
              enctype="multipart/form-data"
              class="product-form"
            >
              <h3>Thêm sản phẩm</h3>
              <input
                type="text"
                name="name"
                placeholder="Tên sản phẩm"
                class="box"
                required
              />
              <input
                type="number"
                name="giá"
                placeholder="Price"
                class="box"
                step="0.01"
                required
              />
              <input
                type="text"
                name="category"
                placeholder="Thuộc loại"
                class="box"
                required
              />
              <input
                type="text"
                name="brand"
                placeholder="Hãng sản xuất"
                class="box"
                required
              />
              <input
                type="file"
                name="image"
                class="box"
                accept="image/*"
                required
              />
              <input type="submit" value="Thêm" class="btn" />
            </form>
          </div>

          <div id="add-category" class="tab-content">
            <form
              action="http://localhost:3200/add-category"
              method="POST"
              enctype="multipart/form-data"
              class="category-form"
            >
              <h3></h3>
              <span>Thời gian hiện tại</span>
              <input
                type="text"
                name="categoryName"
                id="categoryName"
                class="box"
                readonly
              />

              <script>
                function updateClock() {
                  const now = new Date();
                  const pad = (n) => n.toString().padStart(2, "0");
                  const year = now.getFullYear();
                  const month = pad(now.getMonth() + 1);
                  const day = pad(now.getDate());
                  const hours = pad(now.getHours());
                  const minutes = pad(now.getMinutes());
                  const seconds = pad(now.getSeconds());
                  const formatted = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;

                  document.getElementById("categoryName").value = formatted;
                }

                // Update clock every second
                setInterval(updateClock, 1000);

                // Run once immediately when page loads
                document.addEventListener("DOMContentLoaded", updateClock);
              </script>

              <input
                type="file"
                name="categoryImage"
                class="box"
                accept="image/*"
                required
              />
              <input type="submit" value="Thêm" class="btn" />
            </form>
          </div>
        </div>

        <!-- Add the following CSS for styling -->
        <style>
          .tab-container {
            width: 100%;
            margin: 20px 0;
          }

          .tabs {
            display: flex;
            border-bottom: 2px solid #ccc;
          }

          .tab-link {
            padding: 10px 20px;
            cursor: pointer;
            background: #f1f1f1;
            border: none;
            outline: none;
            transition: background 0.3s;
          }

          .tab-link.active {
            background: #007bff;
            color: white;
            font-weight: bold;
          }

          .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
          }

          .tab-content.active {
            display: block;
          }
        </style>

        <!-- Add the following JavaScript for tab functionality -->
        <script>
          function openTab(event, tabId) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll(".tab-content");
            tabContents.forEach((content) =>
              content.classList.remove("active")
            );

            // Remove active class from all tab links
            const tabLinks = document.querySelectorAll(".tab-link");
            tabLinks.forEach((link) => link.classList.remove("active"));

            // Show the selected tab content and set the active class
            document.getElementById(tabId).classList.add("active");
            event.currentTarget.classList.add("active");
          }
        </script>
      </div>

      <form action="" class="login-form">
        <h3>login now</h3>
        <input type="email" placeholder="your email" class="box" />
        <input type="password" placeholder="your password" class="box" />
        <p>forget your password <a href="#">click here</a></p>
        <p>don't have a account <a href="#">create now</a></p>
        <input type="submit" value="login now" class="btn" />
      </form>
    </header>
    <!-- header section ends -->

    <!-- home section starts -->

    <section class="home" id="home">
      <div class="content">
        <h3>Hệ thống nhận diện <span>hàng hóa</span> trong siêu thị</h3>
        <p></p>
        <a href="#" class="btn">shop now</a>
      </div>
    </section>

    <!-- home section ends -->

    <!-- products section starts -->
    <section class="products" id="products">
      <h1 class="heading">our <span>products</span></h1>
      <div class="swiper product-slider">
        <div class="swiper-wrapper" id="product-container">
          <!-- Products will be dynamically loaded here -->
        </div>
      </div>
    </section>
    <script>
      // Fetch products from the backend
      fetch("http://localhost:3200/products")
        .then((response) => {
          if (!response.ok) throw new Error("Failed to fetch products");
          return response.json();
        })
        .then((products) => {
          const container = document.getElementById("product-container");
          container.innerHTML = "";
          products.forEach((product) => {
            const productHTML = `
        <div class="swiper-slide box">
          <img src="${product.url}" alt="${product.name}" onerror="this.src='/images/default.png';">
          <h3>${product.name}</h3>
          <div class="price">${product.price}</div>
          <div class="stars">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
          </div>
          
        </div>
      `;
            // <a href="#" class="btn">add to cart</a>
            container.innerHTML += productHTML;
          });
        })
        .catch((err) => {
          console.error("Error fetching products:", err);
          // Optionally show a user-friendly error instead of throwing HTML
          const container = document.getElementById("product-container");
          container.innerHTML = `<p style="color:red;">Unable to load products at the moment.</p>`;
        });
    </script>
    <!-- products section ends -->

    <!-- categories section starts -->

    <section class="categories" id="categories">
      <h1 class="heading">product <span>categories</span></h1>
      <div class="box-container">
        <div class="box">
          <img src="image/cat-1.png" alt="" />
          <h3>vegetables</h3>
          <p>upto 45% off</p>
          <a href="#" class="btn">shop now</a>
        </div>
        <div class="box">
          <img src="image/cat-2.png" alt="" />
          <h3>fresh fruits</h3>
          <p>upto 45% off</p>
          <a href="#" class="btn">shop now</a>
        </div>
        <div class="box">
          <img src="image/cat-3.png" alt="" />
          <h3>dairy products</h3>
          <p>upto 45% off</p>
          <a href="#" class="btn">shop now</a>
        </div>
        <div class="box">
          <img src="image/cat-4.png" alt="" />
          <h3>fresh meat</h3>
          <p>upto 45% off</p>
          <a href="#" class="btn">shop now</a>
        </div>
      </div>
    </section>

    <!-- categories section ends -->

    <!-- review section starts -->

    <!-- review section ends -->

    <!-- blogs section starts -->

    <!-- blogs section ends -->

    <!-- footer section starts -->

    <section class="footer" id="footer">
      <div class="box-container">
        <div class="box">
          <h3>groco <i class="fas fa-shopping-basket"></i></h3>
          <p></p>
          <div class="share">
            <a href="#" class="fab fa-facebook-f"></a>
            <a href="#" class="fab fa-twitter"></a>
            <a href="#" class="fab fa-instagram"></a>
            <a href="#" class="fab fa-linkedin"></a>
          </div>
        </div>
        <div class="box">
          <h3>content info</h3>
          <a href="#" class="links"
            ><i class="fas fa-phone"></i> +92-321-4655990
          </a>
          <a href="#" class="links contact-through-email"
            ><i class="fas fa-envelope"></i> connectwithmawais@gmail.com
          </a>
          <a href="#" class="links"
            ><i class="fas fa-map-marker-alt"></i> lahore, pakistan - 54840
          </a>
        </div>
        <div class="box">
          <h3>quick links</h3>
          <a href="#home" class="links"
            ><i class="fas fa-arrow-right"></i> home
          </a>

          <a href="#products" class="links"
            ><i class="fas fa-arrow-right"></i> products
          </a>
          <a href="#categories" class="links"
            ><i class="fas fa-arrow-right"></i> categories
          </a>
        </div>
        <div class="box">
          <h3>newsletter</h3>
          <p>subscribe for latest updates</p>
          <input type="email" placeholder="your email" class="email" />
          <input type="submit" value="subscribe" class="btn" />
          <img src="image/payment.png" class="payment-img" alt="" />
        </div>
      </div>
      <div class="credit">
        created by <span>Bing Chilling</span> | all rights reserved
      </div>
    </section>

    <!-- footer section ends -->

    <!-- custom javascript section starts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.0.0/swiper-bundle.min.js"></script>
    <script src="script.js"></script>
    <div id="popup" class="popup hidden">
      <p id="popup-message"></p>
      <button onclick="closePopup()">OK</button>
    </div>

    <style>
      .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border: 1px solid #ccc;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        text-align: center;
      }

      .popup.hidden {
        display: none;
      }

      .popup button {
        margin-top: 10px;
        padding: 5px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }

      .popup button:hover {
        background-color: #0056b3;
      }
    </style>
    <!-- custom javascript section ends -->
  </body>
</html>
